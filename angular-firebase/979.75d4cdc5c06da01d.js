"use strict";(self.webpackChunkangular_firebase=self.webpackChunkangular_firebase||[]).push([[979],{2979:(L,c,s)=>{s.r(c),s.d(c,{BooksModule:()=>R});var d=s(9808),i=s(1402),o=s(5e3),l=s(3075);function p(e,n){if(1&e&&(o.TgZ(0,"div",2),o.TgZ(1,"form",3),o.TgZ(2,"div",4),o.TgZ(3,"label",5),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"div",4),o.TgZ(6,"label",6),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"div",4),o.TgZ(9,"label"),o._uU(10),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(4),o.hij("Name: ",null==t.data?null:t.data.name,""),o.xp6(3),o.hij("Price: ",null==t.data?null:t.data.price,""),o.xp6(3),o.hij(" Stock: ",null==t.data?null:t.data.stock," ")}}function f(e,n){1&e&&(o.TgZ(0,"div",2),o._uU(1," No Data "),o.qZA())}let g=(()=>{class e{constructor(t){this.activatedRoute=t}ngOnInit(){this.activatedRoute.data.subscribe(t=>{t.bookData.subscribe(a=>{this.data=a||"No data"}),console.log("PRODUCT FETCHED")})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(i.gz))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-book-details"]],decls:3,vars:2,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"form-inline"],[1,"form-group"],["for","email"],["for","pwd"]],template:function(t,a){1&t&&(o.TgZ(0,"div",0),o.YNc(1,p,11,3,"div",1),o.YNc(2,f,2,0,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",null==a.data?null:a.data.name),o.xp6(1),o.Q6J("ngIf",!(null!=a.data&&a.data.name)))},directives:[d.O5,l._Y,l.JL,l.F],styles:[""]}),e})();var m=s(6087),v=s(4847),h=s(2075),k=s(8816),B=s(7407);let u=(()=>{class e{constructor(t){this.firestore=t}getBookByCategory(t){return this.firestore.collection("books",a=>a.where("catId","==",t)).valueChanges({idField:"docId"})}getBookById(t){return this.firestore.collection("books").doc(t).valueChanges()}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(B.ST))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),y=(()=>{class e{constructor(t,a,r,A){this.categoryService=t,this.bookService=a,this.router=r,this.activatedRoute=A,this.categoryList=[],this.bookList=[],this.selectCategory="",this.displayedColumns=["name","price","stock"],this.loading=!1}ngOnInit(){this.getCategories()}getCategories(){this.categoryService.getCategories().subscribe(t=>{this.categoryList=t.map(a=>({primaryId:a.payload.doc.id,id:a.payload.doc.data().id,name:a.payload.doc.data().name}))},t=>{console.log(t)})}onChange(t){this.getBooks(t.id)}getBooks(t){this.loading=!0,this.bookService.getBookByCategory(t).subscribe(a=>{a&&(this.bookList=a,this.dataSource=new h.by(this.bookList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort),this.loading=!1},a=>{this.loading=!1,console.log(a)})}bookDetails(t){this.router.navigate([]).then(a=>{window.open("/books/details/"+t.docId,"_blank")})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(k.H),o.Y36(u),o.Y36(i.F0),o.Y36(i.gz))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-book-list"]],viewQuery:function(t,a){if(1&t&&(o.Gf(m.NW,5),o.Gf(v.YE,7)),2&t){let r;o.iGM(r=o.CRH())&&(a.paginator=r.first),o.iGM(r=o.CRH())&&(a.sort=r.first)}},decls:2,vars:0,template:function(t,a){1&t&&(o.TgZ(0,"h3"),o._uU(1," book list\n"),o.qZA())},styles:[""]}),e})(),C=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-book"]],decls:1,vars:0,template:function(t,a){1&t&&o._UZ(0,"router-outlet")},directives:[i.lC],styles:[""]}),e})();var Z=s(9646),b=s(262);const T=[{path:"",component:C,children:[{path:"",component:y},{path:"details/:id",component:g,resolve:{bookData:(()=>{class e{constructor(t){this.bookService=t}resolve(t,a){return(0,Z.of)(this.bookService.getBookById(t.paramMap.get("id")).pipe((0,b.K)(()=>"No data")))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(u))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.Bz.forChild(T)],i.Bz]}),e})();var F=s(3558),I=s(520);let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[d.ez,S,I.JF,F.m.forRoot()]]}),e})()}}]);