"use strict";(self.webpackChunkangular_firebase=self.webpackChunkangular_firebase||[]).push([[447],{5447:(b,c,i)=>{i.r(c),i.d(c,{CategoriesModule:()=>S});var u=i(9808),m=i(1402),C=i(6087),p=i(4847),f=i(2075),l=i(8966);class h{constructor(){return{id:"",name:"",countOfBooks:0}}}var t=i(5e3),y=i(8816),d=i(3075),g=i(7322),A=i(7531),v=i(7423);function M(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is Required "),t.qZA())}function Z(e,r){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",6),t.TgZ(2,"mat-label"),t._uU(3,"Count Of Books"),t.qZA(),t.TgZ(4,"input",13,14),t.NdJ("ngModelChange",function(a){return t.CHM(o),t.oxw().categoryModel.countOfBooks=a}),t.qZA(),t.qZA(),t.BQk()}if(2&e){const o=t.oxw();t.xp6(4),t.Q6J("ngModel",o.categoryModel.countOfBooks)}}let T=(()=>{class e{constructor(o,n,a){this.categoryService=o,this.dialogRef=n,this.data=a,this.categoryModel=new h}ngOnInit(){this.data&&this.data.item&&(this.categoryModel=this.data.item,this.categoryModel.countOfBooks=0,this.getCountBooks())}save(){this.dialogRef.close(this.categoryModel)}onNoClick(){this.dialogRef.close()}getCountBooks(){this.categoryService.getSizeBooks(this.categoryModel.id).subscribe(o=>{o&&(this.categoryModel.countOfBooks=o)},o=>{console.log(o)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(y.H),t.Y36(l.so),t.Y36(l.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-and-edit-category"]],decls:19,vars:5,consts:[[1,""],["mat-dialog-title",""],["novalidate",""],["categoryForm","ngForm"],["mat-dialog-content",""],[1,"row"],[1,"!block","!mb-4","col-6"],["type","text","matInput","","name","name","required","",3,"ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["mat-dialog-actions",""],["type","button","mat-raised-button","","color","primary",1,"mx-4","px-4",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",1,"px-4",3,"click"],["type","number","matInput","","name","countOfBooks","disabled","",3,"ngModel","ngModelChange"],["countOfBooks","ngModel"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"form",2,3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"mat-form-field",6),t.TgZ(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"input",7,8),t.NdJ("ngModelChange",function(s){return n.categoryModel.name=s}),t.qZA(),t.YNc(12,M,2,0,"mat-error",9),t.qZA(),t.YNc(13,Z,6,1,"ng-container",9),t.qZA(),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"button",11),t.NdJ("click",function(){return n.save()}),t._uU(16," Save "),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return n.onNoClick()}),t._uU(18,"cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const a=t.MAs(4),s=t.MAs(11);t.xp6(2),t.Oqu(null==n.data?null:n.data.title),t.xp6(8),t.Q6J("ngModel",n.categoryModel.name),t.xp6(2),t.Q6J("ngIf",null==s||null==s.errors?null:s.errors.required),t.xp6(1),t.Q6J("ngIf",n.data.item),t.xp6(2),t.Q6J("disabled",null==a?null:a.invalid)}},directives:[l.uh,d._Y,d.JL,d.F,l.xY,g.KE,g.hX,A.Nt,d.Fj,d.Q7,d.JJ,d.On,u.O5,l.H8,v.lW,g.TO,d.wV],styles:[""]}),e})();const B=[{path:"",component:(()=>{class e{constructor(o,n){this.dialog=o,this.categoryService=n,this.displayedColumns=["id","name","edit"],this.loading=!1}ngOnInit(){this.getCategories()}createCatalog(o){this.categoryService.addCategory(o)}editCategory(o){this.openDialog(o)}deleteCategory(o){this.categoryService.deleteCategory(o.primaryId)}getCategories(){this.loading=!0,this.categoryService.getCategories().subscribe(o=>{this.items=o.map(n=>({primaryId:n.payload.doc.id,id:n.payload.doc.data().id,name:n.payload.doc.data().name})),this.dataSource=new f.by(this.items),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.loading=!1},o=>{this.loading=!1,console.log(o)})}openDialog(o){this.dialog.open(T,{width:"40%",height:"auto",panelClass:"open-dialog",data:{title:o?"Edit Category":"Add Category",item:o?JSON.parse(JSON.stringify(o)):null}}).afterClosed().subscribe(a=>{a&&(o?this.updateCategory(o.primaryId,a):this.createCatalog(a))})}updateCategory(o,n){this.categoryService.updateCategory(o,n)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.uw),t.Y36(y.H))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-category-list"]],viewQuery:function(o,n){if(1&o&&(t.Gf(C.NW,7),t.Gf(p.YE,7)),2&o){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:2,vars:0,template:function(o,n){1&o&&(t.TgZ(0,"h3"),t._uU(1," category list\n"),t.qZA())},styles:[""]}),e})()}];let J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(B)],m.Bz]}),e})();var O=i(3558);let S=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,J,O.m.forRoot()]]}),e})()}}]);