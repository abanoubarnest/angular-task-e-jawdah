"use strict";(self.webpackChunkangular_firebase=self.webpackChunkangular_firebase||[]).push([[592],{8816:(d,n,r)=>{r.d(n,{H:()=>u});var c=r(4004),a=r(5e3),l=r(7407),g=r(2290);let u=(()=>{class s{constructor(t,e){this.firestore=t,this.toastr=e}getCategories(){return this.firestore.collection("/categories").snapshotChanges()}getID(){return this.firestore.collection("categories").get().pipe((0,c.U)(t=>t.size))}addCategory(t){this.getID().subscribe(e=>{const o=this.firestore.createId();return this.firestore.collection("categories").doc(o).set({name:t.name,id:e+1}).then(i=>{this.toastr.success("Category added successfully")}).catch(i=>{this.toastr.error(i.message)})},e=>{console.log(e)})}deleteCategory(t){this.firestore.collection("categories").doc(t).delete().then(e=>{this.toastr.success("Category deleted successfully")}).catch(e=>{this.toastr.error(e.message)})}getSizeBooks(t){return this.firestore.collection("books",e=>e.where("catId","==",t)).get().pipe((0,c.U)(e=>e.size))}updateCategory(t,e){this.firestore.doc(`categories/${t}`).update({name:e.name}).then(o=>{this.toastr.success("Category edit successfully")}).catch(o=>{this.toastr.error(o.message)})}}return s.\u0275fac=function(t){return new(t||s)(a.LFG(l.ST),a.LFG(g._W))},s.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);